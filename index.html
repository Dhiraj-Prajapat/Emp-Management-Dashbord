<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/src/style.css">
    <style>
    body { background-color: bisque;}
    </style>
</head>
<body>
    <div class="navigation" id="navigation">
        <div>
            <div class="back-btn" id="back-btn"><img src="./src/images/back-button.png" alt="back image"></div>
            <h2>Navigation</h2>
            <a href="/index.html">Home</a>
            <a href="./animated-404-page-main/404page.html">Services</a>
            <a href="./animated-404-page-main/404page.html">About us</a>
            <a href="./animated-404-page-main/404page.html">Contact us</a>
        </div>
        <div>
            <a href="./animated-404-page-main/404page.html">Setting</a>
        </div>
    </div>
    <nav>
        <div>
            <span id="toggle"><img src="./src/images/hamburger_button_icon.png" alt="img not found" height="40px" width="40px"></span>
            <h2>Employee Management Dashboard</h2>
            <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addEmployeeModal">Add Employee</button>
        </div>
    </nav>

    <div class="marquee" id="marquee">
        <p id="marquee-text">Welcome to the Employee Management Dashboard!</p>
    </div>
    
    <div class="main-container">
        <div class="container-fluid overflow-hidden">
            <div class="row list">
                <div class="card">
                    <img src="https://cdn1.iconfinder.com/data/icons/business-finance-vol-3-39/512/sales_salesman_businessman_selling-1024.png" class="card-img-top" alt="sales png">
                    <div class="card-body">
                      <h5 class="card-title">Sales Department</h5>
                      <button class="btn btn-primary view-btn" type="button" data-department="Sales">View Employee's</button>
                    </div>
                </div>
                <div class="card">
                    <img src="https://cdn1.iconfinder.com/data/icons/business-finance-vol-3-39/512/sales_salesman_businessman_selling-1024.png" class="card-img-top" alt="sales png">
                    <div class="card-body">
                        <h5 class="card-title">Technical Department</h5>
                        <button class="btn btn-primary view-btn" type="button" data-department="Technical">View Employee's</button>
                    </div>
                </div>
                <div class="card">
                    <img src="https://cdn1.iconfinder.com/data/icons/business-finance-vol-3-39/512/sales_salesman_businessman_selling-1024.png" class="card-img-top" alt="sales png">
                    <div class="card-body">
                      <h5 class="card-title">Telecalling Department</h5>
                      <button class="btn btn-primary view-btn" type="button" data-department="Telecalling">View Employee's</button>
                    </div>
                </div>
                <div class="card">
                    <img src="https://cdn1.iconfinder.com/data/icons/business-finance-vol-3-39/512/sales_salesman_businessman_selling-1024.png" class="card-img-top" alt="sales png">
                    <div class="card-body">
                      <h5 class="card-title">HR Department</h5>
                      <button class="btn btn-primary view-btn" type="button" data-department="HR">View Employee's</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addEmployeeModalLabel">Add Employee</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addEmployeeForm">
                        <div class="mb-3">
                            <label for="employeeID" class="form-label">Employee ID</label>
                            <input type="text" class="form-control" id="employeeID" required>
                            <div class="invalid-feedback">Please enter a unique employee ID.</div>
                        </div>
                        <div class="mb-3">
                            <label for="employeeName" class="form-label">Employee Name</label>
                            <input type="text" class="form-control" id="employeeName" required>
                            <div class="invalid-feedback">Please enter the employee's name.</div>
                        </div>
                        <div class="mb-3">
                            <label for="employeeEmail" class="form-label">Employee Email</label>
                            <input type="email" class="form-control" id="employeeEmail" required>
                            <div class="invalid-feedback">Please enter a valid email address.</div>
                        </div>
                        <div class="mb-3">
                            <label for="employeeSalary" class="form-label">Employee Salary</label>
                            <input type="number" class="form-control" id="employeeSalary" min="0" required>
                            <div class="invalid-feedback">Please enter a valid salary.</div>
                        </div>
                        <div class="mb-3">
                            <label for="employeeDesignation" class="form-label">Employee Designation</label>
                            <select class="form-control" id="employeeDesignation" required>
                                <option value="">Select designation</option>
                                <option value="Sales">Sales</option>
                                <option value="Technical">Technical</option>
                                <option value="Telecalling">Telecalling</option>
                                <option value="HR">HR</option>
                            </select>
                            <div class="invalid-feedback">Please select a designation.</div>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Employee</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>
        document.querySelectorAll('.view-btn').forEach(button => {
            button.addEventListener('click', function() {
                const department = this.getAttribute('data-department');
                window.location.href = `employee_list.html?department=${department}`;
            });
        });

        // Add Employee Form Validation
        const addEmployeeForm = document.getElementById('addEmployeeForm');
        addEmployeeForm.addEventListener('submit', function(event) {
            event.preventDefault();
            if (!addEmployeeForm.checkValidity()) {
                event.stopPropagation();
                addEmployeeForm.classList.add('was-validated');
                return;
            }

            const employeeID = document.getElementById('employeeID').value;
            let employees = JSON.parse(localStorage.getItem('employees')) || [];

            // Check for duplicate ID
            const isDuplicate = employees.some(employee => employee.id === employeeID);
            if (isDuplicate) {
                document.getElementById('employeeID').setCustomValidity('This ID is already taken.');
                addEmployeeForm.classList.add('was-validated');
                return;
            }

            const employee = {
                id: employeeID,
                name: document.getElementById('employeeName').value,
                email: document.getElementById('employeeEmail').value,
                salary: document.getElementById('employeeSalary').value,
                designation: document.getElementById('employeeDesignation').value
            };

            employees.push(employee);
            localStorage.setItem('employees', JSON.stringify(employees));
            alert('Employee added successfully!');
            this.reset();
            var myModalEl = document.getElementById('addEmployeeModal')
            var modal = bootstrap.Modal.getInstance(myModalEl)
            modal.hide();

            // Update marquee with new employee
            const marqueeText = document.getElementById('marquee-text');
            marqueeText.textContent = `Congratulations to our new employee, ${employee.name}!`;
        });

        const toggle = document.getElementById('toggle');
        const backBtn = document.getElementById('back-btn');
        const nav = document.getElementById('navigation');

        toggle.addEventListener('click', (e) => {
            nav.classList.add('show');
        });

        backBtn.addEventListener('click', (e) => {
            nav.classList.remove('show');
        });

        document.addEventListener('click', (e) => {
            if (!nav.contains(e.target) && !toggle.contains(e.target)) {
                nav.classList.remove('show');
            }
        });
    </script>
</body>
</html>
